{"ast":null,"code":"var _jsxFileName = \"D:\\\\Noticed\\\\GitHub repositories explorer\\\\github-search\\\\src\\\\pages\\\\HomePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport SearchBar from '../components/SearchBar';\nimport UserList from '../components/UserList';\nimport RepoList from '../components/RepoList';\nimport { searchUsers, getUserRepos } from '../services/githubApi';\nimport { useQuery, useInfiniteQuery } from '@tanstack/react-query';\nimport Container from '@mui/material/Container';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Alert from '@mui/material/Alert';\nimport Typography from '@mui/material/Typography';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PER_PAGE = 10;\nconst HomePage = () => {\n  _s();\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // Query untuk mencari pengguna (caching selama 5 menit)\n  const {\n    data: users = [],\n    isLoading: isLoadingUsers,\n    error: userError\n  } = useQuery({\n    queryKey: ['searchUsers', searchQuery],\n    queryFn: () => searchUsers(searchQuery),\n    enabled: !!searchQuery,\n    staleTime: 1000 * 60 * 5\n  });\n\n  // Infinite query untuk repository pengguna terpilih\n  const {\n    data: repoData,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n    error: repoError,\n    isLoading: isLoadingRepos\n  } = useInfiniteQuery({\n    queryKey: ['userRepos', selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.login],\n    initialPageParam: 1,\n    queryFn: ({\n      pageParam = 1\n    }) => {\n      if (!selectedUser) return Promise.resolve([]);\n      return getUserRepos(selectedUser.login, pageParam, PER_PAGE);\n    },\n    enabled: !!selectedUser,\n    getNextPageParam: (lastPage, allPages) => {\n      return lastPage.length === PER_PAGE ? allPages.length + 1 : undefined;\n    },\n    staleTime: 1000 * 60 * 5\n  });\n  const handleSelectUser = user => {\n    setSelectedUser(user);\n  };\n  const handleLoadMore = () => {\n    fetchNextPage();\n  };\n  const repos = repoData ? repoData.pages.flat() : [];\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    sx: {\n      paddingY: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      component: \"h1\",\n      gutterBottom: true,\n      align: \"center\",\n      children: \"GitHub User Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n      onQueryChange: setSearchQuery\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), isLoadingUsers && /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 26\n    }, this), userError && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      children: userError.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(UserList, {\n      users: users,\n      onSelectUser: handleSelectUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), selectedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 20\n      },\n      children: [isLoadingRepos && /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 30\n      }, this), repoError && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        children: repoError.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }, this), repos.length > 0 && /*#__PURE__*/_jsxDEV(RepoList, {\n        repos: repos,\n        username: selectedUser.login,\n        onLoadMore: handleLoadMore,\n        hasMore: !!hasNextPage,\n        isLoadingMore: isFetchingNextPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(HomePage, \"QTnzlM49LROqZenQ8QMN3/SKlRw=\", false, function () {\n  return [useQuery, useInfiniteQuery];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useState","SearchBar","UserList","RepoList","searchUsers","getUserRepos","useQuery","useInfiniteQuery","Container","CircularProgress","Alert","Typography","jsxDEV","_jsxDEV","PER_PAGE","HomePage","_s","selectedUser","setSelectedUser","searchQuery","setSearchQuery","data","users","isLoading","isLoadingUsers","error","userError","queryKey","queryFn","enabled","staleTime","repoData","fetchNextPage","hasNextPage","isFetchingNextPage","repoError","isLoadingRepos","login","initialPageParam","pageParam","Promise","resolve","getNextPageParam","lastPage","allPages","length","undefined","handleSelectUser","user","handleLoadMore","repos","pages","flat","maxWidth","sx","paddingY","children","variant","component","gutterBottom","align","fileName","_jsxFileName","lineNumber","columnNumber","onQueryChange","severity","message","onSelectUser","style","marginTop","username","onLoadMore","hasMore","isLoadingMore","_c","$RefreshReg$"],"sources":["D:/Noticed/GitHub repositories explorer/github-search/src/pages/HomePage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport SearchBar from '../components/SearchBar';\r\nimport UserList from '../components/UserList';\r\nimport RepoList from '../components/RepoList';\r\nimport { GitHubUser, GitHubRepo, searchUsers, getUserRepos } from '../services/githubApi';\r\nimport { useQuery, useInfiniteQuery } from '@tanstack/react-query';\r\nimport Container from '@mui/material/Container';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Alert from '@mui/material/Alert';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nconst PER_PAGE = 10;\r\n\r\nconst HomePage: React.FC = () => {\r\n  const [selectedUser, setSelectedUser] = useState<GitHubUser | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState<string>('');\r\n\r\n  // Query untuk mencari pengguna (caching selama 5 menit)\r\n  const { data: users = [], isLoading: isLoadingUsers, error: userError } = useQuery<GitHubUser[], Error>({\r\n    queryKey: ['searchUsers', searchQuery],\r\n    queryFn: () => searchUsers(searchQuery),\r\n    enabled: !!searchQuery,\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n\r\n  // Infinite query untuk repository pengguna terpilih\r\n  const {\r\n    data: repoData,\r\n    fetchNextPage,\r\n    hasNextPage,\r\n    isFetchingNextPage,\r\n    error: repoError,\r\n    isLoading: isLoadingRepos,\r\n  } = useInfiniteQuery<GitHubRepo[], Error, GitHubRepo[], any, number>({\r\n    queryKey: ['userRepos', selectedUser?.login],\r\n    initialPageParam: 1,\r\n    queryFn: ({ pageParam = 1 }) => {\r\n      if (!selectedUser) return Promise.resolve([]);\r\n      return getUserRepos(selectedUser.login, pageParam, PER_PAGE);\r\n    },\r\n    enabled: !!selectedUser,\r\n    getNextPageParam: (lastPage, allPages) => {\r\n      return lastPage.length === PER_PAGE ? allPages.length + 1 : undefined;\r\n    },\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n\r\n  const handleSelectUser = (user: GitHubUser) => {\r\n    setSelectedUser(user);\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    fetchNextPage();\r\n  };\r\n\r\n  const repos: GitHubRepo[] = repoData ? (repoData.pages.flat() as GitHubRepo[]) : [];\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" sx={{ paddingY: 4 }}>\r\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\r\n        GitHub User Search\r\n      </Typography>\r\n      <SearchBar onQueryChange={setSearchQuery} />\r\n\r\n      {isLoadingUsers && <CircularProgress />}\r\n      {userError && <Alert severity=\"error\">{userError.message}</Alert>}\r\n\r\n      <UserList users={users} onSelectUser={handleSelectUser} />\r\n\r\n      {selectedUser && (\r\n        <div style={{ marginTop: 20 }}>\r\n          {isLoadingRepos && <CircularProgress />}\r\n          {repoError && <Alert severity=\"error\">{repoError.message}</Alert>}\r\n          {repos.length > 0 && (\r\n            <RepoList\r\n              repos={repos}\r\n              username={selectedUser.login}\r\n              onLoadMore={handleLoadMore}\r\n              hasMore={!!hasNextPage}\r\n              isLoadingMore={isFetchingNextPage}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}